#get frequency table for plotting
freq_table <- data.frame(table(works_proc$year))
colnames(freq_table) <- c("year", "frequency")
freq_table$year <- as.numeric(as.character(freq_table$year))
freq_table$label <- sapply(freq_table$year, function(x){
inds <- which(works_proc$year == x)
paste(paste0(sapply(works_proc$author[inds], function(x){x[1]}), " (", works_proc$year[inds], "). ", works_proc$title[inds], ". ", works_proc$source[inds], "."), collapse = "\n")
})
#create data frame of labels
labels_df <- data.frame(
x = 0, y = c(0.98, 0.94, 0.90, 0.86),
label = labels,
fill_color = c("#0072B2", "#D55E00", "#009E73", "#CC79A7"), hjust = 0
)
#plot graph
plot_a <- ggraph(create_layout(network, layout = layout)) +
geom_edge_arc(aes(alpha = log(weight)), strength = 0.1) +
geom_node_point(aes(color = color)) +
geom_point_interactive(data = layout_df, aes(x = x, y = y, color = color, tooltip = label)) +
scale_edge_alpha(range = c(0, 0.05)) +
scale_color_identity() +
scale_x_continuous(limits = c(-0.1, 1.01), expand = c(0, 0)) +
scale_y_continuous(limits = c(-0.1, 1.01), expand = c(0, 0)) +
theme_graph(base_family = "Helvetica") +
theme(legend.position = "none", plot.margin = unit(c(0, 0, 0, 0), "pt"))
plot_b <- ggplot(freq_table) +
geom_point_interactive(aes(x = year, y = frequency, tooltip = label)) +
scale_x_continuous(breaks = seq(1900, 2020, 20)) +
labs(x = "Year", y = "# Publications") +
theme_linedraw(base_family = "Helvetica") +
theme(panel.background = element_blank(), plot.background = element_blank(), axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1), plot.margin = unit(c(0, 0, 0, 0), "pt"))
plot_c <- ggplot(labels_df) +
geom_label_interactive(aes(x = x, y = y, label = label, fill = fill_color, hjust = hjust), color = "white") +
scale_x_continuous(limits = c(0, 1), expand = c(0, 0)) +
scale_y_continuous(limits = c(0, 1), expand = c(0, 0)) +
scale_fill_identity() +
theme_void(base_family = "Helvetica") +
theme(plot.margin = unit(c(0, 0, 0, 0), "pt"))
#https://patchwork.data-imaginist.com/reference/area.html
layout_patchwork <- c(
area(1, 1, 12, 20),
area(9, 1, 12, 5),
area(1, 1, 12, 20)
)
#create static plot
plot <- free(plot_a) + free(plot_b) + free(plot_c) + plot_layout(design = layout_patchwork)
#export static plot
png("output/ce_art_biblio.png", width = 12, height = 6.5, units = "in", res = 600); plot; dev.off()
svg("output/ce_art_biblio.svg", width = 12, height = 6.5); plot; dev.off()
ggraph(create_layout(network, layout = layout)) +
geom_edge_arc(aes(alpha = log(weight)), strength = 0.1) +
geom_node_point(aes(color = color)) +
geom_point_interactive(data = layout_df, aes(x = x, y = y, color = color, tooltip = label)) +
scale_edge_alpha(range = c(0, 0.05)) +
scale_color_identity() +
scale_x_continuous(limits = c(-0.1, 1.01), expand = c(0, 0)) +
scale_y_continuous(limits = c(-0.1, 1.01), expand = c(0, 0)) +
theme_graph(base_family = "Helvetica") +
theme(legend.position = "none", plot.margin = unit(c(0, 0, 0, 0), "pt"))
ggraph(create_layout(network, layout = layout)) +
geom_edge_arc(aes(alpha = log(weight)), strength = 0.1) +
geom_node_point(aes(color = color)) +
geom_point_interactive(data = layout_df, aes(x = x, y = y, color = color, tooltip = label)) +
scale_edge_alpha(range = c(0, 0.05)) +
scale_color_identity() +
scale_x_continuous(limits = c(-0.5, 1.01), expand = c(0, 0)) +
scale_y_continuous(limits = c(-0.1, 1.01), expand = c(0, 0)) +
theme_graph(base_family = "Helvetica") +
theme(legend.position = "none", plot.margin = unit(c(0, 0, 0, 0), "pt"))
#plot graph
plot_a <- ggraph(create_layout(network, layout = layout)) +
geom_edge_arc(aes(alpha = log(weight)), strength = 0.1) +
geom_node_point(aes(color = color)) +
geom_point_interactive(data = layout_df, aes(x = x, y = y, color = color, tooltip = label)) +
scale_edge_alpha(range = c(0, 0.05)) +
scale_color_identity() +
scale_x_continuous(limits = c(-0.2, 1.01), expand = c(0, 0)) +
scale_y_continuous(limits = c(-0.1, 1.01), expand = c(0, 0)) +
theme_graph(base_family = "Helvetica") +
theme(legend.position = "none", plot.margin = unit(c(0, 0, 0, 0), "pt"))
plot_b <- ggplot(freq_table) +
geom_point_interactive(aes(x = year, y = frequency, tooltip = label)) +
scale_x_continuous(breaks = seq(1900, 2020, 20)) +
labs(x = "Year", y = "# Publications") +
theme_linedraw(base_family = "Helvetica") +
theme(panel.background = element_blank(), plot.background = element_blank(), axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1), plot.margin = unit(c(0, 0, 0, 0), "pt"))
plot_c <- ggplot(labels_df) +
geom_label_interactive(aes(x = x, y = y, label = label, fill = fill_color, hjust = hjust), color = "white") +
scale_x_continuous(limits = c(0, 1), expand = c(0, 0)) +
scale_y_continuous(limits = c(0, 1), expand = c(0, 0)) +
scale_fill_identity() +
theme_void(base_family = "Helvetica") +
theme(plot.margin = unit(c(0, 0, 0, 0), "pt"))
#https://patchwork.data-imaginist.com/reference/area.html
layout_patchwork <- c(
area(1, 1, 12, 20),
area(9, 1, 12, 5),
area(1, 1, 12, 20)
)
#create static plot
plot <- free(plot_a) + free(plot_b) + free(plot_c) + plot_layout(design = layout_patchwork)
#export static plot
png("output/ce_art_biblio.png", width = 12, height = 6.5, units = "in", res = 600); plot; dev.off()
svg("output/ce_art_biblio.svg", width = 12, height = 6.5); plot; dev.off()
#compute layout
layout <- layout_with_kk(network, weights = ifelse(crossing(clusters, network), 1, 0.5))
#layout <- graphlayouts::layout_rotate(layout, 180)
layout[, 1] <- usefun::normalize_to_range(layout[, 1], range = c(0, 1))
layout[, 2] <- usefun::normalize_to_range(layout[, 2], range = c(0, 1))
#create layout object for interactive plot
layout_df <- as.data.frame(layout)
colnames(layout_df) <- c("x", "y")
layout_df <- cbind(layout_df, color = node_colors)
ids <- match(V(network)$name, works_proc$id)
layout_df$label <- paste0(sapply(works_proc$author[ids], function(x){x[1]}), " (", works_proc$year[ids], "). ", works_proc$title[ids], ". ", works_proc$source[ids], ".")
#get frequency table for plotting
freq_table <- data.frame(table(works_proc$year))
colnames(freq_table) <- c("year", "frequency")
freq_table$year <- as.numeric(as.character(freq_table$year))
freq_table$label <- sapply(freq_table$year, function(x){
inds <- which(works_proc$year == x)
paste(paste0(sapply(works_proc$author[inds], function(x){x[1]}), " (", works_proc$year[inds], "). ", works_proc$title[inds], ". ", works_proc$source[inds], "."), collapse = "\n")
})
#create data frame of labels
labels_df <- data.frame(
x = 0, y = c(0.98, 0.94, 0.90, 0.86),
label = labels,
fill_color = c("#0072B2", "#D55E00", "#009E73", "#CC79A7"), hjust = 0
)
ggraph(create_layout(network, layout = layout)) +
geom_edge_arc(aes(alpha = log(weight)), strength = 0.1) +
geom_node_point(aes(color = color)) +
geom_point_interactive(data = layout_df, aes(x = x, y = y, color = color, tooltip = label)) +
scale_edge_alpha(range = c(0, 0.05)) +
scale_color_identity() +
scale_x_continuous(limits = c(-0.2, 1.01), expand = c(0, 0)) +
scale_y_continuous(limits = c(-0.1, 1.01), expand = c(0, 0)) +
theme_graph(base_family = "Helvetica") +
theme(legend.position = "none", plot.margin = unit(c(0, 0, 0, 0), "pt"))
#compute layout
layout <- layout_with_kk(network, weights = ifelse(crossing(clusters, network), 1, 0.4))
#layout <- graphlayouts::layout_rotate(layout, 180)
layout[, 1] <- usefun::normalize_to_range(layout[, 1], range = c(0, 1))
layout[, 2] <- usefun::normalize_to_range(layout[, 2], range = c(0, 1))
#create layout object for interactive plot
layout_df <- as.data.frame(layout)
colnames(layout_df) <- c("x", "y")
layout_df <- cbind(layout_df, color = node_colors)
ids <- match(V(network)$name, works_proc$id)
layout_df$label <- paste0(sapply(works_proc$author[ids], function(x){x[1]}), " (", works_proc$year[ids], "). ", works_proc$title[ids], ". ", works_proc$source[ids], ".")
#get frequency table for plotting
freq_table <- data.frame(table(works_proc$year))
colnames(freq_table) <- c("year", "frequency")
freq_table$year <- as.numeric(as.character(freq_table$year))
freq_table$label <- sapply(freq_table$year, function(x){
inds <- which(works_proc$year == x)
paste(paste0(sapply(works_proc$author[inds], function(x){x[1]}), " (", works_proc$year[inds], "). ", works_proc$title[inds], ". ", works_proc$source[inds], "."), collapse = "\n")
})
#create data frame of labels
labels_df <- data.frame(
x = 0, y = c(0.98, 0.94, 0.90, 0.86),
label = labels,
fill_color = c("#0072B2", "#D55E00", "#009E73", "#CC79A7"), hjust = 0
)
ggraph(create_layout(network, layout = layout)) +
geom_edge_arc(aes(alpha = log(weight)), strength = 0.1) +
geom_node_point(aes(color = color)) +
geom_point_interactive(data = layout_df, aes(x = x, y = y, color = color, tooltip = label)) +
scale_edge_alpha(range = c(0, 0.05)) +
scale_color_identity() +
scale_x_continuous(limits = c(-0.2, 1.01), expand = c(0, 0)) +
scale_y_continuous(limits = c(-0.1, 1.01), expand = c(0, 0)) +
theme_graph(base_family = "Helvetica") +
theme(legend.position = "none", plot.margin = unit(c(0, 0, 0, 0), "pt"))
#compute layout
layout <- layout_with_kk(network, weights = ifelse(crossing(clusters, network), 1, 0.4))
layout <- graphlayouts::layout_rotate(layout, 45)
layout[, 1] <- usefun::normalize_to_range(layout[, 1], range = c(0, 1))
layout[, 2] <- usefun::normalize_to_range(layout[, 2], range = c(0, 1))
#create layout object for interactive plot
layout_df <- as.data.frame(layout)
colnames(layout_df) <- c("x", "y")
layout_df <- cbind(layout_df, color = node_colors)
ids <- match(V(network)$name, works_proc$id)
layout_df$label <- paste0(sapply(works_proc$author[ids], function(x){x[1]}), " (", works_proc$year[ids], "). ", works_proc$title[ids], ". ", works_proc$source[ids], ".")
#get frequency table for plotting
freq_table <- data.frame(table(works_proc$year))
colnames(freq_table) <- c("year", "frequency")
freq_table$year <- as.numeric(as.character(freq_table$year))
freq_table$label <- sapply(freq_table$year, function(x){
inds <- which(works_proc$year == x)
paste(paste0(sapply(works_proc$author[inds], function(x){x[1]}), " (", works_proc$year[inds], "). ", works_proc$title[inds], ". ", works_proc$source[inds], "."), collapse = "\n")
})
#create data frame of labels
labels_df <- data.frame(
x = 0, y = c(0.98, 0.94, 0.90, 0.86),
label = labels,
fill_color = c("#0072B2", "#D55E00", "#009E73", "#CC79A7"), hjust = 0
)
ggraph(create_layout(network, layout = layout)) +
geom_edge_arc(aes(alpha = log(weight)), strength = 0.1) +
geom_node_point(aes(color = color)) +
geom_point_interactive(data = layout_df, aes(x = x, y = y, color = color, tooltip = label)) +
scale_edge_alpha(range = c(0, 0.05)) +
scale_color_identity() +
scale_x_continuous(limits = c(-0.2, 1.01), expand = c(0, 0)) +
scale_y_continuous(limits = c(-0.1, 1.01), expand = c(0, 0)) +
theme_graph(base_family = "Helvetica") +
theme(legend.position = "none", plot.margin = unit(c(0, 0, 0, 0), "pt"))
#compute layout
layout <- layout_with_kk(network, weights = ifelse(crossing(clusters, network), 1, 0.4))
layout <- graphlayouts::layout_rotate(layout, -30)
layout[, 1] <- usefun::normalize_to_range(layout[, 1], range = c(0, 1))
layout[, 2] <- usefun::normalize_to_range(layout[, 2], range = c(0, 1))
#create layout object for interactive plot
layout_df <- as.data.frame(layout)
colnames(layout_df) <- c("x", "y")
layout_df <- cbind(layout_df, color = node_colors)
ids <- match(V(network)$name, works_proc$id)
layout_df$label <- paste0(sapply(works_proc$author[ids], function(x){x[1]}), " (", works_proc$year[ids], "). ", works_proc$title[ids], ". ", works_proc$source[ids], ".")
#get frequency table for plotting
freq_table <- data.frame(table(works_proc$year))
colnames(freq_table) <- c("year", "frequency")
freq_table$year <- as.numeric(as.character(freq_table$year))
freq_table$label <- sapply(freq_table$year, function(x){
inds <- which(works_proc$year == x)
paste(paste0(sapply(works_proc$author[inds], function(x){x[1]}), " (", works_proc$year[inds], "). ", works_proc$title[inds], ". ", works_proc$source[inds], "."), collapse = "\n")
})
#create data frame of labels
labels_df <- data.frame(
x = 0, y = c(0.98, 0.94, 0.90, 0.86),
label = labels,
fill_color = c("#0072B2", "#D55E00", "#009E73", "#CC79A7"), hjust = 0
)
ggraph(create_layout(network, layout = layout)) +
geom_edge_arc(aes(alpha = log(weight)), strength = 0.1) +
geom_node_point(aes(color = color)) +
geom_point_interactive(data = layout_df, aes(x = x, y = y, color = color, tooltip = label)) +
scale_edge_alpha(range = c(0, 0.05)) +
scale_color_identity() +
scale_x_continuous(limits = c(-0.2, 1.01), expand = c(0, 0)) +
scale_y_continuous(limits = c(-0.1, 1.01), expand = c(0, 0)) +
theme_graph(base_family = "Helvetica") +
theme(legend.position = "none", plot.margin = unit(c(0, 0, 0, 0), "pt"))
#gemini 3 pro
#Write short descriptions of these clusters of publications on cultural evolution of the arts, to be used as subfield labels.
labels <- c(
"Cognitive and Ecological Drivers of Aesthetics and Narrative",
"Phylogenetic Reconstruction of Cultural Lineages",
"Quantitative Dynamics of Cultural Markets and Style",
"Biomusicology and the Evolution of Musical Structure"
)
#get large clusters
large_cluster_ids <- which(sizes(clusters) >= 10)
#manage colors
node_colors <- rep("gray50", vcount(network))
palette <- c("#0072B2", "#D55E00", "#009E73", "#CC79A7", "#F0E442", "#56B4E9", "#E69F00")
color_map <- setNames(palette, large_cluster_ids)
membership <- membership(clusters)
nodes_in_large_clusters <- which(membership(clusters) %in% large_cluster_ids)
node_colors[nodes_in_large_clusters] <- color_map[as.character(membership[nodes_in_large_clusters])]
V(network)$color <- node_colors
#compute layout
layout <- layout_with_kk(network, weights = ifelse(crossing(clusters, network), 1, 0.4))
layout <- graphlayouts::layout_rotate(layout, -30)
layout[, 1] <- usefun::normalize_to_range(layout[, 1], range = c(0, 1))
layout[, 2] <- usefun::normalize_to_range(layout[, 2], range = c(0, 1))
#create layout object for interactive plot
layout_df <- as.data.frame(layout)
colnames(layout_df) <- c("x", "y")
layout_df <- cbind(layout_df, color = node_colors)
ids <- match(V(network)$name, works_proc$id)
layout_df$label <- paste0(sapply(works_proc$author[ids], function(x){x[1]}), " (", works_proc$year[ids], "). ", works_proc$title[ids], ". ", works_proc$source[ids], ".")
#get frequency table for plotting
freq_table <- data.frame(table(works_proc$year))
colnames(freq_table) <- c("year", "frequency")
freq_table$year <- as.numeric(as.character(freq_table$year))
freq_table$label <- sapply(freq_table$year, function(x){
inds <- which(works_proc$year == x)
paste(paste0(sapply(works_proc$author[inds], function(x){x[1]}), " (", works_proc$year[inds], "). ", works_proc$title[inds], ". ", works_proc$source[inds], "."), collapse = "\n")
})
#create data frame of labels
labels_df <- data.frame(
x = 0, y = c(0.98, 0.94, 0.90, 0.86),
label = labels,
fill_color = c("#0072B2", "#D55E00", "#009E73", "#CC79A7"), hjust = 0
)
#plot graph
plot_a <- ggraph(create_layout(network, layout = layout)) +
geom_edge_arc(aes(alpha = log(weight)), strength = 0.1) +
geom_node_point(aes(color = color)) +
geom_point_interactive(data = layout_df, aes(x = x, y = y, color = color, tooltip = label)) +
scale_edge_alpha(range = c(0, 0.05)) +
scale_color_identity() +
scale_x_continuous(limits = c(-0.2, 1.01), expand = c(0, 0)) +
scale_y_continuous(limits = c(-0.1, 1.01), expand = c(0, 0)) +
theme_graph(base_family = "Helvetica") +
theme(legend.position = "none", plot.margin = unit(c(0, 0, 0, 0), "pt"))
plot_b <- ggplot(freq_table) +
geom_point_interactive(aes(x = year, y = frequency, tooltip = label)) +
scale_x_continuous(breaks = seq(1900, 2020, 20)) +
labs(x = "Year", y = "# Publications") +
theme_linedraw(base_family = "Helvetica") +
theme(panel.background = element_blank(), plot.background = element_blank(), axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1), plot.margin = unit(c(0, 0, 0, 0), "pt"))
plot_c <- ggplot(labels_df) +
geom_label_interactive(aes(x = x, y = y, label = label, fill = fill_color, hjust = hjust), color = "white") +
scale_x_continuous(limits = c(0, 1), expand = c(0, 0)) +
scale_y_continuous(limits = c(0, 1), expand = c(0, 0)) +
scale_fill_identity() +
theme_void(base_family = "Helvetica") +
theme(plot.margin = unit(c(0, 0, 0, 0), "pt"))
#https://patchwork.data-imaginist.com/reference/area.html
layout_patchwork <- c(
area(1, 1, 12, 20),
area(9, 1, 12, 5),
area(1, 1, 12, 20)
)
#create static plot
plot <- free(plot_a) + free(plot_b) + free(plot_c) + plot_layout(design = layout_patchwork)
#export static plot
png("output/ce_art_biblio.png", width = 12, height = 6.5, units = "in", res = 600); plot; dev.off()
svg("output/ce_art_biblio.svg", width = 12, height = 6.5); plot; dev.off()
#plot graph
plot_a <- ggraph(create_layout(network, layout = layout)) +
geom_edge_arc(aes(alpha = log(weight)), strength = 0.1) +
geom_node_point(aes(color = color)) +
geom_point_interactive(data = layout_df, aes(x = x, y = y, color = color, tooltip = label)) +
scale_edge_alpha(range = c(0, 0.05)) +
scale_color_identity() +
scale_x_continuous(limits = c(-0.15, 1.01), expand = c(0, 0)) +
scale_y_continuous(limits = c(-0.1, 1.01), expand = c(0, 0)) +
theme_graph(base_family = "Helvetica") +
theme(legend.position = "none", plot.margin = unit(c(0, 0, 0, 0), "pt"))
plot_b <- ggplot(freq_table) +
geom_point_interactive(aes(x = year, y = frequency, tooltip = label)) +
scale_x_continuous(breaks = seq(1900, 2020, 20)) +
labs(x = "Year", y = "# Publications") +
theme_linedraw(base_family = "Helvetica") +
theme(panel.background = element_blank(), plot.background = element_blank(), axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1), plot.margin = unit(c(0, 0, 0, 0), "pt"))
plot_c <- ggplot(labels_df) +
geom_label_interactive(aes(x = x, y = y, label = label, fill = fill_color, hjust = hjust), color = "white") +
scale_x_continuous(limits = c(0, 1), expand = c(0, 0)) +
scale_y_continuous(limits = c(0, 1), expand = c(0, 0)) +
scale_fill_identity() +
theme_void(base_family = "Helvetica") +
theme(plot.margin = unit(c(0, 0, 0, 0), "pt"))
#https://patchwork.data-imaginist.com/reference/area.html
layout_patchwork <- c(
area(1, 1, 12, 20),
area(9, 1, 12, 5),
area(1, 1, 12, 20)
)
#create static plot
plot <- free(plot_a) + free(plot_b) + free(plot_c) + plot_layout(design = layout_patchwork)
#export static plot
png("output/ce_art_biblio.png", width = 12, height = 6.5, units = "in", res = 600); plot; dev.off()
svg("output/ce_art_biblio.svg", width = 12, height = 6.5); plot; dev.off()
#plot graph
plot_a <- ggraph(create_layout(network, layout = layout)) +
geom_edge_arc(aes(alpha = log(weight)), strength = 0.1) +
geom_node_point(aes(color = color)) +
geom_point_interactive(data = layout_df, aes(x = x, y = y, color = color, tooltip = label)) +
scale_edge_alpha(range = c(0, 0.05)) +
scale_color_identity() +
scale_x_continuous(limits = c(-0.12, 1.01), expand = c(0, 0)) +
scale_y_continuous(limits = c(-0.1, 1.01), expand = c(0, 0)) +
theme_graph(base_family = "Helvetica") +
theme(legend.position = "none", plot.margin = unit(c(0, 0, 0, 0), "pt"))
plot_b <- ggplot(freq_table) +
geom_point_interactive(aes(x = year, y = frequency, tooltip = label)) +
scale_x_continuous(breaks = seq(1900, 2020, 20)) +
labs(x = "Year", y = "# Publications") +
theme_linedraw(base_family = "Helvetica") +
theme(panel.background = element_blank(), plot.background = element_blank(), axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1), plot.margin = unit(c(0, 0, 0, 0), "pt"))
plot_c <- ggplot(labels_df) +
geom_label_interactive(aes(x = x, y = y, label = label, fill = fill_color, hjust = hjust), color = "white") +
scale_x_continuous(limits = c(0, 1), expand = c(0, 0)) +
scale_y_continuous(limits = c(0, 1), expand = c(0, 0)) +
scale_fill_identity() +
theme_void(base_family = "Helvetica") +
theme(plot.margin = unit(c(0, 0, 0, 0), "pt"))
#https://patchwork.data-imaginist.com/reference/area.html
layout_patchwork <- c(
area(1, 1, 12, 20),
area(9, 1, 12, 5),
area(1, 1, 12, 20)
)
#create static plot
plot <- free(plot_a) + free(plot_b) + free(plot_c) + plot_layout(design = layout_patchwork)
#export static plot
png("output/ce_art_biblio.png", width = 12, height = 6.5, units = "in", res = 600); plot; dev.off()
svg("output/ce_art_biblio.svg", width = 12, height = 6.5); plot; dev.off()
#export interactive plot
interactive_plot <- girafe(
ggobj = plot,
fonts = list(sans = "Helvetica"),
width_svg = 12,
height_svg = 6.5,
options = list(
opts_tooltip(css = "font-family: Arial, Helvetica, sans-serif; font-style: bold; background-color: black; color: white; padding: 10px; border-radius: 10px")
)
)
saveWidget(interactive_plot, file = "docs/index.html", selfcontained = TRUE)
unlist(works_proc$references)
table(unlist(works_proc$references))
sort(table(unlist(works_proc$references)))
sort(table(unlist(works_proc$references)), decreasing = TRUE)
sort(table(unlist(works_proc$references)), decreasing = TRUE)[1:10]
sort(table(unlist(works_proc$references)), decreasing = TRUE)[1:10]
data.frame(sort(table(unlist(works_proc$references)), decreasing = TRUE)[1:10])
freq_table <- data.frame(sort(table(unlist(works_proc$references)), decreasing = TRUE)[1:10])
colnames(freq_table) <- c("id", "count")
freq_table <- data.frame(sort(table(unlist(works_proc$references)), decreasing = TRUE)[1:10])
colnames(freq_table) <- c("id", "count")
oa_fetch(entity = "works", identifer = freq_table$id[1])
freq_table$id[1]
freq_table <- data.frame(sort(table(unlist(works_proc$references)), decreasing = TRUE)[1:10])
colnames(freq_table) <- c("id", "count")
freq_table$id <- as.character(freq_table$id)
oa_fetch(entity = "works", identifer = freq_table$id[1])
oa_fetch(entity = "works", identifer = freq_table$id[1], output = "list")
#get put into polite pool
options(openalexR.mailto = "masonyoungblood@gmail.com")
oa_fetch(entity = "works", identifer = freq_table$id[1], output = "list")
oa_fetch(entity = "works", identifer = paste0("https://openalex.org/", freq_table$id[1]), output = "list")
oa_fetch(entity = "works", identifer = paste0("https://openalex.org/", freq_table$id[2]), output = "list")
paste0("https://openalex.org/", freq_table$id[2])
oa_fetch(entity = "works", identifier = "https://openalex.org/W2973262226", output = "list")
freq_table$id
oa_fetch(entity = "works", identifier = "https://openalex.org/W2147453867", output = "list")
paste0("https://openalex.org/", freq_table$id[2])
oa_fetch(entity = "works", identifier = "https://openalex.org/W1811781384", output = "list")
x <- 1
temp <- paste0("https://openalex.org/", freq_table$id[x])
temp <- oa_fetch(entity = "works", identifier = temp, output = "list")
x <- 2
temp <- paste0("https://openalex.org/", freq_table$id[x])
temp <- oa_fetch(entity = "works", identifier = temp, output = "list")
temp
freq_table$id[[1]]
freq_table <- data.frame(sort(table(unlist(works_proc$references)), decreasing = TRUE)[2:11])
colnames(freq_table) <- c("id", "count")
freq_table$id <- as.character(freq_table$id)
x <- 1
temp <- paste0("https://openalex.org/", freq_table$id[x])
temp <- oa_fetch(entity = "works", identifier = temp, output = "list")
temp
temp$authorships
temp$authorships[[1]]
temp$authorships[[1]]$author$display_name
temp$publication_year
temp$title
temp$ids
temp$primary_location
temp$primary_location$source
temp$primary_location$source$display_name
stringr::str_to_title(temp$primary_location$source$display_name)
stringr::str_to_sentence(temp$title)
temp$authorships[[1]]$author$display_name
temp$publication_year
stringr::str_to_sentence(temp$title)
stringr::str_to_title(temp$primary_location$source$display_name)
temp <- paste0("https://openalex.org/", freq_table$id[x])
temp <- oa_fetch(entity = "works", identifier = temp, output = "list")
temp[[1]]
temp$authorships[[1]]$author$display_name
temp$publication_year
stringr::str_to_sentence(temp$title)
stringr::str_to_title(temp$primary_location$source$display_name)
temp <- paste0("https://openalex.org/", freq_table$id[x])
temp <- oa_fetch(entity = "works", identifier = temp, output = "list")
temp$authorships[[1]]$author$display_name
temp$publication_year
stringr::str_to_sentence(temp$title)
stringr::str_to_title(temp$primary_location$source$display_name)
temp <- paste0("https://openalex.org/", freq_table$id[x])
temp
x <- 2
temp <- paste0("https://openalex.org/", freq_table$id[x])
temp <- oa_fetch(entity = "works", identifier = temp, output = "list")
temp$authorships[[1]]$author$display_name
temp$publication_year
stringr::str_to_sentence(temp$title)
stringr::str_to_title(temp$primary_location$source$display_name)
sapply(works_proc$author[inds], function(x){x[1]})
paste0(temp$authorships[[1]]$author$display_name, " (", temp$publication_year, "). ", stringr::str_to_sentence(temp$title))
paste0(temp$authorships[[1]]$author$display_name, " (", temp$publication_year, "). ", stringr::str_to_sentence(temp$title), ". ", stringr::str_to_title(temp$primary_location$source$display_name), ".")
sapply(1:nrow(freq_table), function(x){
temp <- paste0("https://openalex.org/", freq_table$id[x])
temp <- oa_fetch(entity = "works", identifier = temp, output = "list")
paste0(temp$authorships[[1]]$author$display_name, " (", temp$publication_year, "). ", stringr::str_to_sentence(temp$title), ". ", stringr::str_to_title(temp$primary_location$source$display_name), ".")
})
freq_table <- data.frame(sort(table(unlist(works_proc$references)), decreasing = TRUE)[2:21])
colnames(freq_table) <- c("id", "count")
freq_table$id <- as.character(freq_table$id)
sapply(1:nrow(freq_table), function(x){
temp <- paste0("https://openalex.org/", freq_table$id[x])
temp <- oa_fetch(entity = "works", identifier = temp, output = "list")
paste0(temp$authorships[[1]]$author$display_name, " (", temp$publication_year, "). ", stringr::str_to_sentence(temp$title), ". ", stringr::str_to_title(temp$primary_location$source$display_name), ".")
})
freq_table <- data.frame(sort(table(unlist(works_proc$references)), decreasing = TRUE)[2:21])
colnames(freq_table) <- c("id", "count")
freq_table$id <- as.character(freq_table$id)
freq_table$title <- sapply(1:nrow(freq_table), function(x){
temp <- paste0("https://openalex.org/", freq_table$id[x])
temp <- oa_fetch(entity = "works", identifier = temp, output = "list")
paste0(temp$authorships[[1]]$author$display_name, " (", temp$publication_year, "). ", stringr::str_to_sentence(temp$title), ". ", stringr::str_to_title(temp$primary_location$source$display_name), ".")
})
freq_table
freq_table[, c(3, 2)]
freq_table[, c(2, 3)]
write.csv(freq_table, "data/top_20.csv")
